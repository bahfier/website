import{v as X}from"./index-53f12bfd.js";import{d as x}from"./index-8e2c8b63.js";/* empty css              *//* empty css              *//* empty css              */import{D as Q,b as tt,a as B,d as D,U as et}from"./index-8a1531da.js";import{F as p,G as g,J as t,K as H,d as ot,r as M,x as at,aR as st,aP as e,aN as o,aZ as l,u as a,aM as S,aY as d,aV as nt,I as rt,aK as b,w as T,bi as it,bk as lt,b4 as dt,bl as ct,b1 as ut,b0 as pt,bm as ft,bj as _t,ah as ht,bq as mt,br as wt,bo as gt,b5 as xt,b6 as vt}from"./ui-9b3bf580.js";import{_ as bt}from"./logo-e12f330a.js";import{g as yt,u as kt,f as Bt,h as St,j as $t}from"./vue-0322dc53.js";import{i as z,Z as It,p as Tt}from"./wallet-2de90956.js";import{_ as Ct}from"./plugin-vueexport-helper-c27b6911.js";const At={xmlns:"http://www.w3.org/2000/svg",height:"200",fill:"none",class:"absolute top-0 pointer-events-none",preserveAspectRatio:"none",viewBox:"0 0 1200 200"},Ut=t("path",{fill:"url(#a)","fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.477 2 12v176c0 5.523 4.477 10 10 10h1176c5.52 0 10-4.477 10-10V12c0-5.523-4.48-10-10-10zm0-2C5.373 0 0 5.373 0 12v176c0 6.627 5.373 12 12 12h1176c6.63 0 12-5.373 12-12V12c0-6.627-5.37-12-12-12z","clip-rule":"evenodd"},null,-1),Rt=t("defs",null,[t("radialGradient",{id:"a",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(0 177 -768.063 0 600 0)",gradientUnits:"userSpaceOnUse"},[t("stop",{"stop-color":"#6B78EE"}),t("stop",{offset:"1","stop-color":"#FD5CB7","stop-opacity":"0"})])],-1),Dt=[Ut,Rt];function Mt(_,w){return p(),g("svg",At,[...Dt])}const Ft={render:Mt},Gt={xmlns:"http://www.w3.org/2000/svg",height:"244",fill:"none",class:"absolute top-0 pointer-events-none",preserveAspectRatio:"none",viewBox:"0 0 720 244"},Vt=t("rect",{width:"718",height:"242",x:"1",y:"1",stroke:"url(#a)","stroke-width":"2",rx:"11"},null,-1),Et=t("defs",null,[t("radialGradient",{id:"a",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(0 215.94 -460.838 0 360 0)",gradientUnits:"userSpaceOnUse"},[t("stop",{"stop-color":"#6B78EE"}),t("stop",{offset:"1","stop-color":"#FD5CB7","stop-opacity":"0"})])],-1),zt=[Vt,Et];function Ht(_,w){return p(),g("svg",Gt,[...zt])}const Ot={render:Ht},Lt={xmlns:"http://www.w3.org/2000/svg",height:"399",fill:"none",class:"absolute top-0 pointer-events-none",preserveAspectRatio:"none",viewBox:"0 0 343 399"},Nt=t("rect",{width:"341",height:"397",x:"1",y:"1",stroke:"url(#a)","stroke-width":"2",rx:"11"},null,-1),Pt=t("defs",null,[t("radialGradient",{id:"a",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(0 353.115 -219.538 0 171.5 0)",gradientUnits:"userSpaceOnUse"},[t("stop",{"stop-color":"#6B78EE"}),t("stop",{offset:"1","stop-color":"#FD5CB7","stop-opacity":"0"})])],-1),jt=[Nt,Pt];function Zt(_,w){return p(),g("svg",Lt,[...jt])}const Kt={render:Zt},Wt={xmlns:"http://www.w3.org/2000/svg",height:"200",fill:"none",class:"absolute top-0 pointer-events-none",preserveAspectRatio:"xMinYMin",viewBox:"0 0 1200 200"},Yt=H('<g clip-path="url(#a)" filter="url(#b)" opacity=".3"><ellipse cx="600" cy="-54.5" fill="url(#c)" fill-opacity=".8" rx="550" ry="128.5"></ellipse></g><defs><linearGradient id="c" x1="-121.111" x2="1138.17" y1="-236.542" y2="136.474" gradientUnits="userSpaceOnUse"><stop offset=".143" stop-color="#E05FBB"></stop><stop offset="1" stop-color="#4250F4"></stop></linearGradient><clipPath id="a"><path fill="#fff" d="M0 0h1200v200H0z"></path></clipPath><filter id="b" width="1388" height="545" x="-94" y="-327" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur result="effect1_foregroundBlur_3430_23345" stdDeviation="72"></feGaussianBlur></filter></defs>',2),qt=[Yt];function Jt(_,w){return p(),g("svg",Wt,[...qt])}const Xt={render:Jt},Qt={xmlns:"http://www.w3.org/2000/svg",height:"399",fill:"none",class:"absolute top-0 pointer-events-none",preserveAspectRatio:"none",viewBox:"0 0 343 399"},te=H('<g clip-path="url(#a)" filter="url(#b)" opacity=".3"><ellipse cx="171.5" cy="48" fill="url(#c)" fill-opacity=".8" rx="185.5" ry="240"></ellipse></g><rect width="341" height="397" x="1" y="1" stroke="url(#d)" stroke-width="2" rx="11"></rect><defs><radialGradient id="d" cx="0" cy="0" r="1" gradientTransform="matrix(0 353.115 -219.538 0 171.5 0)" gradientUnits="userSpaceOnUse"><stop stop-color="#6B78EE"></stop><stop offset="1" stop-color="#FD5CB7" stop-opacity="0"></stop></radialGradient><linearGradient id="c" x1="-71.711" x2="388.957" y1="-292" y2="-267.358" gradientUnits="userSpaceOnUse"><stop offset=".143" stop-color="#E05FBB"></stop><stop offset="1" stop-color="#4250F4"></stop></linearGradient><clipPath id="a"><path fill="#fff" d="M0 0h343v399H0z"></path></clipPath><filter id="b" width="659" height="768" x="-158" y="-336" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur result="effect1_foregroundBlur_7679_62101" stdDeviation="72"></feGaussianBlur></filter></defs>',3),ee=[te];function oe(_,w){return p(),g("svg",Qt,[...ee])}const ae={render:oe},se={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 73 73"},ne=t("path",{stroke:"#5A5C74",d:"M49 1H1v48"},null,-1),re=t("path",{stroke:"#fff","stroke-width":"2",d:"M11 1H1v10"},null,-1),ie=[ne,re];function le(_,w){return p(),g("svg",se,[...ie])}const de={render:le},ce={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 73 73"},ue=t("path",{stroke:"#5A5C74",d:"M24 1h48v48"},null,-1),pe=t("path",{stroke:"#fff","stroke-width":"2",d:"M62 1h10v10"},null,-1),fe=[ue,pe];function _e(_,w){return p(),g("svg",ce,[...fe])}const he={render:_e},me={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 73 73"},we=t("path",{stroke:"#5A5C74",d:"M49 72H1V24"},null,-1),ge=t("path",{stroke:"#fff","stroke-width":"2",d:"M11 72H1V62"},null,-1),xe=[we,ge];function ve(_,w){return p(),g("svg",me,[...xe])}const be={render:ve},ye={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 73 73"},ke=t("path",{stroke:"#5A5C74",d:"M24 72h48V24"},null,-1),Be=t("path",{stroke:"#fff","stroke-width":"2",d:"M62 72h10V62"},null,-1),Se=[ke,Be];function $e(_,w){return p(),g("svg",ye,[...Se])}const Ie={render:$e},F=_=>(xt("data-v-5113f72c"),_=_(),vt(),_),Te={class:"reward-container"},Ce={class:"databox"},Ae={class:"back"},Ue={class:"databox-item"},Re={class:"title"},De={class:"context"},Me={class:"databox-item"},Fe={class:"title"},Ge={class:"context"},Ve={class:"databox-item"},Ee={class:"title"},ze={class:"context"},He={class:"from"},Oe={class:"from-header"},Le={class:"from-content"},Ne={class:"info-box"},Pe={class:"info-box"},je={class:"input-box",style:{"padding-top":"8px"}},Ze={class:"input-box"},Ke=F(()=>t("img",{src:bt,style:{width:"45px","margin-right":"8px"}},null,-1)),We=F(()=>t("span",null,"_",-1)),Ye=F(()=>t("span",null,"_",-1)),qe={class:"from-footer"},Je=ot({__name:"index",setup(_){const w=yt(),{lg:G,md:C}=kt(Bt),{t:i}=X.useI18n(),{params:V}=St(),v=Q(),A=tt(),h=M({totalToken:0,totalShare:0,totalReward:0,loading:!1}),y=M({totalToken:0,totalShare:0,totalReward:0}),n=M({history:0,share:0,reward:0,notClaim:0,inviteToken:0,inviteShare:0,inviteNum:0,balance:0n,parent:"",amountInput:0,parentInput:"",claimIng:!1,burnIng:!1});z(V.parent)&&(n.parentInput=V.parent);async function O(){[h.totalReward,h.totalToken,h.totalShare]=await Promise.all([v.totalDividendsDistributed().then(s=>x(s)),A._totalBurnToken().then(s=>x(s)),v.totalSupply().then(s=>x(s))])}async function U(){const s=B.address.value;if(s){const u=await D();u.balanceOf(s).then(k=>{n.balance=k});const[r,...f]=await u.getRewardInfo(),[c,m,$,I]=f.map(k=>x(k));n.parent=r,n.history=c,n.share=m,n.reward=$,n.notClaim=I}}async function L(){if(n.share<50){b.warning(i("reward.sharelow"));return}const s=$t();if(s.isSupported){const{fullPath:u}=w.resolve(`/reward/${B.address.value}`),{location:r}=window,f=r.href.startsWith(`${r.origin}/#`),c=`${r.origin}${f?"/#":""}${u}`;s.copy(c).then(()=>{b.success(i("reward.copysuccess"))})}else b.warning(i("reward.copyfail"))}async function N(){if(n.notClaim===0){b.warning("Too few rewards");return}if(B.isConnected.value)try{n.claimIng=!0;const u=await(await D()).claim().then(r=>r.wait());u&&(u.logs.filter(r=>r.address===et),n.notClaim=0)}catch(s){s.reason?b.error(s.reason):b.error(i("mint.fail"))}finally{n.claimIng=!1}}async function P(){if(B.address.value){const{amountInput:u,parentInput:r}=n;n.burnIng=!0;try{const f=await D(),c=z(r)?r:It;await f.burnToReward(Tt(u.toString()),c).then(m=>m.wait())}catch(f){f.reason?b.error(f.reason):b.error(i("mint.fail"))}n.burnIng=!1}}async function j(){const{balance:s}=n;n.amountInput=x(s)}function Z(){T(()=>h.totalReward,s=>{s&&setTimeout(()=>{y.totalReward=s},1e3)}),T(()=>h.totalShare,s=>{s&&setTimeout(()=>{y.totalShare=s},1e3)}),T(()=>h.totalToken,s=>{s&&setTimeout(()=>{y.totalToken=s},1e3)}),T(B.address,s=>{s&&U()})}function K(){v.on(v.getEvent("DividendsDistributed"),(s,u,r)=>{h.totalReward=x(r),U()}),A.on(A.getEvent("BurnToReward"),(s,u,r,f,c)=>{h.totalToken=x(f),h.totalShare=x(c)})}return at(()=>{Z(),K(),O(),B.isConnected.value&&U()}),st(()=>{v.off(v.getEvent("DividendsDistributed")),v.off(v.getEvent("Claim"))}),(s,u)=>{const r=it,f=lt,c=dt,m=ct,$=ut,I=pt,k=ft,E=_t,W=ht,Y=mt,q=wt,J=gt;return p(),g("div",Te,[e(c,{style:{width:"1200px","max-width":"90%",margin:"0 auto","text-align":"center"},gutter:[20,30]},{default:o(()=>[e(r,null,{default:o(()=>[t("h1",null,l(a(i)("reward.title")),1)]),_:1}),e(r,null,{default:o(()=>[t("span",null,l(a(i)("reward.description")),1)]),_:1}),t("div",Ce,[t("div",Ae,[a(G)?(p(),S(a(Ft),{key:0})):a(C)?(p(),S(a(Ot),{key:1})):(p(),S(a(Kt),{key:2})),a(G)||a(C)?(p(),S(a(Xt),{key:3})):(p(),S(a(ae),{key:4}))]),e(c,null,{default:o(()=>[e(r,{sm:24,md:8,style:{width:"100%"}},{default:o(()=>[t("div",Ue,[t("div",Re,l(a(i)("reward.totalToken")),1),t("div",De,[e(f,{value:h.totalToken,"value-from":y.totalToken,"animation-duration":1e3,"show-group-separator":"",animation:""},null,8,["value","value-from"]),d(" BAH ")])])]),_:1}),e(r,{sm:24,md:8,style:{width:"100%"}},{default:o(()=>[t("div",Me,[t("div",Fe,l(a(i)("reward.totalShare")),1),t("div",Ge,[e(f,{value:h.totalShare,"value-from":y.totalShare,"animation-duration":1e3,"show-group-separator":"",animation:""},null,8,["value","value-from"]),d(" USD ")])])]),_:1}),e(r,{sm:24,md:8,style:{width:"100%"}},{default:o(()=>[t("div",Ve,[t("div",Ee,l(a(i)("reward.totalReward")),1),t("div",ze,[e(f,{value:h.totalReward,"value-from":y.totalReward,"animation-duration":1e3,"show-group-separator":"",animation:""},null,8,["value","value-from"]),d(" USD ")])])]),_:1})]),_:1})]),t("div",He,[t("div",Oe,[e(a(de),{class:"radius"}),e(a(he),{class:"radius"})]),t("div",Le,[e(c,{style:{width:"100%",margin:"auto"}},{default:o(()=>[e(r,{style:{width:"100%",padding:"10px 10px"},md:10},{default:o(()=>[t("div",Ne,[e(k,{layout:"inline-vertical",column:{xs:1,md:2},"label-style":{paddingTop:"20px"},"table-layout":"fixed",size:"large",title:a(i)("reward.info")},{default:o(()=>[e(m,{label:a(i)("reward.burnToken")},{default:o(()=>[d(l(n.history.toLocaleString())+" BAH ",1)]),_:1},8,["label"]),e(m,{label:a(i)("reward.share")},{default:o(()=>[d(l(n.share.toLocaleString())+" USD ",1)]),_:1},8,["label"]),e(m,{label:a(i)("reward.rewards")},{default:o(()=>[d(l(n.reward.toLocaleString())+" USD ",1)]),_:1},8,["label"]),e(m,{label:a(i)("reward.notclaim")},{default:o(()=>[e(I,{size:20},{default:o(()=>[d(l(n.notClaim.toLocaleString())+" USD ",1),n.notClaim>0?(p(),S($,{key:0,class:"claim",size:"small",loading:n.claimIng,onClick:N},{default:o(()=>[d(l(a(i)("reward.claim")),1)]),_:1},8,["loading"])):nt("",!0)]),_:1})]),_:1},8,["label"])]),_:1},8,["title"])])]),_:1}),e(r,{style:{width:"100%",padding:"10px 10px"},md:14},{default:o(()=>[t("div",Pe,[e(k,{layout:"inline-vertical",column:{md:3,xs:1},size:"large","label-style":{paddingTop:"10px"}},{default:o(()=>[e(m,{label:a(i)("reward.invite.burn")},{default:o(()=>[d(l(n.inviteToken.toLocaleString()),1)]),_:1},8,["label"]),e(m,null,{label:o(()=>[d(l(a(i)("reward.invite.share")),1)]),default:o(()=>[d(" "+l(n.inviteShare.toLocaleString()),1)]),_:1}),e(m,{label:a(i)("reward.balance")},{default:o(()=>[d(l(a(x)(n.balance).toLocaleString()),1)]),_:1},8,["label"])]),_:1}),t("div",je,[e(c,{style:{"padding-bottom":"10px"},justify:"space-between"},{default:o(()=>[e(E,{color:"#7816ff"},{default:o(()=>[d(l(a(i)("reward.invite.recv")),1)]),_:1}),e(Y,{status:"warning",onClick:L},{default:o(()=>[e(I,{size:5},{default:o(()=>[d(l(a(i)("reward.copy"))+" ",1),e(W)]),_:1})]),_:1})]),_:1}),e(c,{align:"center"},{default:o(()=>[e(r,{flex:"70px"},{default:o(()=>[d(l(a(i)("reward.referrer")),1)]),_:1}),e(r,{flex:"auto"},{default:o(()=>[e(q,{modelValue:n.parentInput,"onUpdate:modelValue":u[0]||(u[0]=R=>n.parentInput=R),class:"input"},null,8,["modelValue"])]),_:1})]),_:1})]),t("div",Ze,[e(c,null,{default:o(()=>[e(r,{flex:"140px"},{default:o(()=>[e(c,{justify:"start",align:"center",style:{height:"62px","font-size":"30px",color:"rgb(255, 90, 181)"}},{default:o(()=>[Ke,d(" BAH ")]),_:1})]),_:1}),e(r,{flex:"auto"},{default:o(()=>[e(c,{justify:"space-between",style:rt([{"padding-bottom":"12px"},{paddingRight:a(C)?"100px":"0"}])},{default:o(()=>[We,Ye]),_:1},8,["style"]),e(c,{gutter:[10,10]},{default:o(()=>[e(r,{flex:"auto"},{default:o(()=>[e(J,{modelValue:n.amountInput,"onUpdate:modelValue":u[1]||(u[1]=R=>n.amountInput=R),class:"input","hide-button":""},{suffix:o(()=>[t("div",{onClick:j},[e(E,{color:"#7816ff",checkable:""},{default:o(()=>[d("MAX")]),_:1})])]),_:1},8,["modelValue"])]),_:1}),e(r,{flex:"60px"},{default:o(()=>[e($,{class:"enter",loading:n.burnIng,onClick:P},{default:o(()=>[d(l(a(i)("reward.burn")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})]),t("div",qe,[e(a(be),{class:"radius"}),e(a(Ie),{class:"radius"})])])]),_:1})])}}});const co=Ct(Je,[["__scopeId","data-v-5113f72c"]]);export{co as default};
