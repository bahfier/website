import{v as U}from"./index-2c746865.js";/* empty css              *//* empty css              */import{d as u}from"./index-8e2c8b63.js";/* empty css              */import{b as G,p as J,a as p,d as A}from"./index-3db43db1.js";import{d as K,r as C,c as z,x as W,F as S,G as I,aP as e,aN as o,J as b,aZ as y,u as s,aY as _,I as X,aK as g,w as f,bi as Y,bk as Q,bl as $,bm as tt,b4 as at,bj as et,bo as ot,b1 as nt,bp as st,bh as it,b5 as lt,b6 as rt}from"./ui-9b3bf580.js";import{_ as ut}from"./logo-e12f330a.js";import{i as dt,u as ct,f as mt}from"./vue-0322dc53.js";import{Z as ft}from"./wallet-2de90956.js";import{_ as pt}from"./plugin-vueexport-helper-c27b6911.js";const _t=x=>(lt("data-v-800a08f1"),x=x(),rt(),x),bt={class:"mint-container"},ht={class:"title"},gt={class:"description"},yt={class:"info-box"},xt={key:0,class:"info-box info-box-right"},Tt={class:"input-box"},vt=_t(()=>b("img",{src:ut,style:{width:"45px","margin-right":"8px"}},null,-1)),wt={key:1,class:"info-box"},kt={style:{position:"absolute",bottom:"10px",width:"100%","padding-right":"40px"}},At=K({__name:"index",setup(x){const B=dt(),{md:F}=ct(mt),{t:l}=U.useI18n(),a=C({quantityTotal:0n,extractTotal:0n,enterTotal:0n,loading:!1,inputAmount:0,balance:0n,startTime:0,amount:0n,history:0n,interest:0n}),r=C({quantityTotal:0n,extractTotal:0n,enterTotal:0n,balance:0n,startTime:0,amount:0n,history:0n,interest:0n}),c=G(),v=z(()=>{const{startTime:t,amount:n}=a;if(t>0){const i=BigInt(Math.floor(B.value/1e3-t)),d=n*15n/10n/BigInt(60*60*24*30);return i*d}return 0n}),q=z(()=>{const{interest:t}=a;return v.value>0n?v.value-t:0n});async function D(){[a.quantityTotal,a.extractTotal,a.enterTotal]=await Promise.all([c.balanceOf(J),c._totalFarmClaim(),c._totalFarmStake()])}async function T(){const t=p.address.value;if(t){c.balanceOf(t).then(i=>{a.balance=i});const n=await c._farmPool(t);a.startTime=Number(n.startTime),a.amount=n.amount,a.history=n.history,a.interest=n.interest}}async function N(){if(p.address.value){a.loading=!0;try{await(await A()).farmEnter(BigInt(a.inputAmount)*10n**18n).then(i=>i.wait())}catch(n){n.reason?g.error(n.reason):g.error(l("mint.fail"))}a.loading=!1}}async function E(){const{balance:t}=a;a.inputAmount=Math.floor(u(t))}async function R(){if(p.address.value){a.loading=!0;try{await(await A()).farmInterest().then(i=>i.wait())}catch(n){n.reason?g.error(n.reason):g.error(l("mint.fail"))}a.loading=!1}}async function V(){if(p.address.value){a.loading=!0;try{await(await A()).fastEtnerRewardPool(ft).then(i=>i.wait())}catch(n){n.reason?g.error(n.reason):g.error(l("mint.fail"))}a.loading=!1}}function j(){f(()=>a.quantityTotal,t=>{t&&setTimeout(()=>{r.quantityTotal=t},1e3)}),f(()=>a.extractTotal,t=>{t&&setTimeout(()=>{r.extractTotal=t},1e3)}),f(()=>a.enterTotal,t=>{t&&setTimeout(()=>{r.enterTotal=t},1e3)}),f(()=>a.startTime,t=>{t&&setTimeout(()=>{r.startTime=t},1e3)}),f(()=>a.amount,t=>{t&&setTimeout(()=>{r.amount=t},1e3)}),f(()=>a.history,t=>{t&&setTimeout(()=>{r.history=t},1e3)}),f(()=>a.interest,t=>{t&&setTimeout(()=>{r.interest=t},1e3)}),f(p.address,t=>{t&&T()})}function H(){c.on(c.getEvent("FarmEnter"),(t,n,i)=>{a.enterTotal=i,p.address.value===t&&T()}),c.on(c.getEvent("FarmInterest"),(t,n,i,d)=>{a.extractTotal=d,p.address.value===t&&T()})}return W(()=>{j(),H(),D(),T()}),(t,n)=>{const i=Y,d=Q,m=$,w=tt,h=at,M=et,P=ot,k=nt,O=st,Z=it;return S(),I("div",bt,[e(h,{style:{width:"1000px","max-width":"90%",margin:"auto"},gutter:[20,20]},{default:o(()=>[e(i,null,{default:o(()=>[b("div",ht,y(s(l)("farm.title")),1),b("div",gt,y(s(l)("farm.description")),1)]),_:1}),e(i,{style:{width:"100%"},md:10},{default:o(()=>[b("div",yt,[e(w,{layout:"inline-vertical",column:1,size:"large","label-style":{paddingTop:"20px"},title:s(l)("farm.status")},{default:o(()=>[e(m,{label:s(l)("farm.bonus")},{default:o(()=>[e(d,{value:s(u)(a.quantityTotal),"value-from":s(u)(r.quantityTotal),"value-style":{fontSize:"14px"},"animation-duration":1e3,"show-group-separator":"",animation:""},null,8,["value","value-from"])]),_:1},8,["label"]),e(m,{label:s(l)("farm.withdrawals")},{default:o(()=>[e(d,{value:s(u)(a.extractTotal),"value-from":s(u)(r.extractTotal),"value-style":{fontSize:"14px"},"animation-duration":1e3,"show-group-separator":"",animation:""},null,8,["value","value-from"])]),_:1},8,["label"]),e(m,{label:s(l)("farm.amountAll")},{default:o(()=>[e(d,{value:s(u)(a.enterTotal),"value-from":s(u)(r.enterTotal),"value-style":{fontSize:"14px"},"animation-duration":1e3,"show-group-separator":"",animation:""},null,8,["value","value-from"])]),_:1},8,["label"])]),_:1},8,["title"])])]),_:1}),e(i,{style:{width:"100%"},md:14},{default:o(()=>[a.amount===0n?(S(),I("div",xt,[e(w,{layout:"inline-vertical",column:1,size:"large","label-style":{paddingTop:"10px"}},{default:o(()=>[e(m,{label:s(l)("farm.balance")},{default:o(()=>[e(d,{value:s(u)(a.balance),"value-from":s(u)(r.balance),"value-style":{fontSize:"14px"},"animation-duration":1e3,"show-group-separator":"",animation:""},null,8,["value","value-from"])]),_:1},8,["label"]),e(m,{label:s(l)("farm.stakedays")},{default:o(()=>[e(d,{value:30,"value-style":{fontSize:"14px"},"animation-duration":1e3,"show-group-separator":"",animation:""})]),_:1},8,["label"])]),_:1}),b("div",Tt,[e(h,null,{default:o(()=>[e(i,{flex:"130px"},{default:o(()=>[e(h,{justify:"start",align:"center",style:{height:"62px","font-size":"30px",color:"rgb(255, 90, 181)"}},{default:o(()=>[vt,_(" BAH ")]),_:1})]),_:1}),e(i,{flex:"auto"},{default:o(()=>[e(h,{justify:"space-between",style:X([{"padding-bottom":"12px"},{paddingRight:s(F)?"100px":"0"}])},null,8,["style"]),e(h,{gutter:[10,10]},{default:o(()=>[e(i,{flex:"auto"},{default:o(()=>[e(P,{modelValue:a.inputAmount,"onUpdate:modelValue":n[0]||(n[0]=L=>a.inputAmount=L),class:"input","hide-button":""},{suffix:o(()=>[b("div",{onClick:E},[e(M,{color:"#7816ff",checkable:""},{default:o(()=>[_("MAX")]),_:1})])]),_:1},8,["modelValue"])]),_:1}),e(i,{flex:"70px"},{default:o(()=>[e(k,{class:"enter",loading:a.loading,onClick:N},{default:o(()=>[_(y(s(l)("reward.farm")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})])])):(S(),I("div",wt,[e(w,{layout:"inline-vertical",column:{xs:1,md:3},"label-style":{paddingTop:"20px"},"value-style":{fontSize:"16px"},size:"large",title:"我的状态"},{default:o(()=>[e(m,{label:"倒计时"},{default:o(()=>[e(O,{value:a.startTime*1e3+1e3*60*60*24*30,now:s(B),"value-style":{fontSize:"16px"},format:"DD:HH:mm:ss"},null,8,["value","now"])]),_:1}),e(m,{label:"赚取数量"},{default:o(()=>[_(y(s(u)(v.value,0).toLocaleString()),1)]),_:1}),e(m,{label:"可提取"},{default:o(()=>[_(y(s(u)(q.value,0).toLocaleString()),1)]),_:1})]),_:1}),b("div",kt,[e(h,{justify:"space-between"},{default:o(()=>[e(k,{class:"mint",loading:a.loading,onClick:R},{default:o(()=>[_(" 提取到钱包 ")]),_:1},8,["loading"]),e(Z,{text:"+10%","dot-style":{background:"#0FC6C2"}},{default:o(()=>[e(k,{class:"mint",loading:a.loading,onClick:V},{default:o(()=>[_(" 提取到黑洞 ")]),_:1},8,["loading"])]),_:1})]),_:1})])]))]),_:1})]),_:1})])}}});const Vt=pt(At,[["__scopeId","data-v-800a08f1"]]);export{Vt as default};
